# 表形式から関連データへの変換
表形式のRDRASheetからRDRAGraphで表示できる関連データへ変換する

## 関連データの構造
１行目と２行目以降でフォーマットが変わります
### １行目のフォーマット
１カラムでシステム名を表します
### ２行目以降のフォーマット
４カラムから出来ています
A：関係：「#child」「#edge」「#comment」「#arrow」「#stereotype」「#attribute」
B：モデル1：モデル名を表し、右のリストから表す「業務」「BUC」「アクティビティ」「UC」「情報」「状態モデル」「状態」「アクター群」「アクター」「外部システム群」「外部システム」「コンテキスト」「条件」「バリエーション」
C：モデル2：モデル名を表し、右のリストから表す「BUC」「アクティビティ」「UC」「情報」「状態モデル」「状態」「アクター」「外部システム」「条件」「バリエーション」「説明」「値」
D：オブジェクト同士の関連を表す結合された文字列（オブジェクト1@@オブジェクト2//オブジェクト1@@オブジェクト2//～）
#### モデル1とモデル2
RDRASheetのカラム名がモデルになる
#### オブジェクト同士の関連を表す結合された文字列
RDRASheetで定義された１行の定義から複数の関連を作り出し関連データとする
複数のオブジェクト同士の関連を一つの文字列として表現している
##### 文字列の結合ルール
オブジェクト1：モデル1に対応したオブジェクト名
オブジェクト2：モデル2に対応したオブジェクト名
@@：オブジェクト1と2を分離する文字
//：オブジェクトの関連を分離する文字
### 関連データの行はモデル1とモデル2の組合せで行をユニークにする
モデル１とモデル2のペアが同じ場合は「オブジェクト1@@オブジェクト2」のペアを「//」で区切って一つの文字列にして、
モデルの組合せ毎に複数の「オブジェクト1@@オブジェクト2//オブジェクト1@@オブジェクト2~」」をつけてください

## 関連データの例　（関連/モデル1/モデル2/オブジェクト1@@オブジェクト2//オブジェクト1@@オブジェクト2~）
図書館管理システム
#child	業務	BUC	貸出・返却@@貸出//貸出・返却@@Web予約//貸出・返却@@返却//会員管理@@会員登録//会員管理@@期限管理//蔵書管理@@棚卸
#edge	アクティビティ	UC	蔵書を貸出す@@蔵書の貸出を登録する//貸出予約@@貸出本の予約・取消をする//予約図書準備@@予約図書一覧を出力する//予約図書準備@@予約図書を取り置く//予約図書を受け取る@@取置図書を消し込む//予約図書を受け取る@@蔵書の貸出を登録する//貸出図書を返却する@@貸出図書の返却を登録する//会員新規登録@@会員IDを発行する//会員の確認@@会員カードの発行（再）する//会員の確認@@会員を照会する//会員の更新@@会員情報を更新する//貸出期限確認@@貸出期限を確認する//貸出期限確認@@取置期限を確認する//取置図書の返却@@取置を解消する//棚卸を行う@@棚卸登録//新規書籍受け入れ@@蔵書を登録する
#arrow	アクティビティ	アクティビティ	書架から本を探す@@蔵書を貸出す//貸出予約@@予約図書準備//予約図書準備@@予約図書を受け取る//貸出図書を返却する@@返却図書を書架に返す//会員新規登録@@会員の確認//貸出期限確認@@取置図書の返却//棚卸を行う@@書籍発注リストの作成
#comment	アクティビティ	説明	棚卸を行う@@図書館職員が棚を見ながら棚卸を行う//書籍発注リストの作成@@司書は書籍発注リストを手動で作成する//書籍補充発注@@司書は書籍発注リストを元に書籍通販システムの画面で発注する//新規書籍受け入れ@@受け入れた書籍を検品する
#attribute	情報	属性	会員@@会員ID、会員名、入会日
#stereotype	状態	Stereotype	1.start@@start//1.stop@@stop//2.start@@start//3.start@@start//3.stop@@stop

## 「アクター」シートから関連データの２行目以降の変換
### カラムの並び
アクター群/アクター/説明
### 関連データの変換
#child	アクター群	アクター
#comment	アクター	説明

## 「外部システム」シートから関連データの２行目以降の変換
### カラムの並び
外部システム群/外部システム/説明
### 関連データの変換
#child	外部システム群	外部システム
#comment	外部システム	説明

## 階層構造
- 空白セルは一つ上のセルの値を引き継ぐ
- 同じカラムで上下に同じ場合は親の値と見なせる
### シート別の階層構造 シート：親⇒子
- アクター：アクター群⇒アクター
- 外部システム：外部システム群⇒外部システム
- 情報：コンテキスト⇒情報
- 状態：コンテキスト⇒状態、遷移先状態
- 条件：コンテキスト⇒条件
- バリエーション：コンテキスト⇒バリエーション

## 「BUC」シートから関連データの２行目以降の変換

### カラムの並び
業務/BUC/先/アクティビティ/次/UC/関連モデル1/関連オブジェクト1/関連モデル2/関連オブジェクト2/説明
### 関連データの変換
#child	業務	BUC	オブジェクト1@@オブジェクト2//~
#child	BUC	アクティビティ	オブジェクト1@@オブジェクト2//~
#edge	アクティビティ	アクティビティ	オブジェクト1@@オブジェクト2//~
#edge	アクティビティ	UC	オブジェクト1@@オブジェクト2//~
#edge	アクティビティ	画面	オブジェクト1@@オブジェクト2//~
#edge	アクティビティ	アクター	オブジェクト1@@オブジェクト2//~
#edge	アクティビティ	情報	オブジェクト1@@オブジェクト2//~
#edge	アクティビティ	タイマー	オブジェクト1@@オブジェクト2//~
#comment	アクティビティ	説明	オブジェクト1@@オブジェクト2//~
#edge	UC	画面	オブジェクト1@@オブジェクト2//~
#edge	UC	イベント	オブジェクト1@@オブジェクト2//~
#edge	UC	情報	オブジェクト1@@オブジェクト2//~
#edge	UC	条件	オブジェクト1@@オブジェクト2//~
#edge	UC	タイマー	オブジェクト1@@オブジェクト2//~
#comment	UC	説明	オブジェクト1@@オブジェクト2//~
#edge	画面	アクター	オブジェクト1@@オブジェクト2//~
#edge	画面	外部システム	オブジェクト1@@オブジェクト2//~
#edge	イベント	アクター	オブジェクト1@@オブジェクト2//~
#edge	アクター	情報	オブジェクト1@@オブジェクト2//~
#edge	イベント	外部システム	オブジェクト1@@オブジェクト2//~

## 「情報」シートから関連データの２行目以降の変換
### カラムの並び
コンテキスト/情報/属性/関連情報/状態モデル/バリエーション/説明
### 関連データの変換
#child	コンテキスト	情報	オブジェクト1@@オブジェクト2//~
#attribute	情報	属性	オブジェクト1@@オブジェクト2//~
#edge	情報	情報	オブジェクト1@@オブジェクト2//~
#edge	情報	状態モデル	オブジェクト1@@オブジェクト2//~
#edge	情報	バリエーション	オブジェクト1@@オブジェクト2//~
#comment	情報	説明	オブジェクト1@@オブジェクト2//~

## 「状態」シートから関連データの２行目以降の変換
### カラムの並び
コンテキスト/状態モデル/状態/遷移UC/遷移先状態/状態モデル・状態の説明
・遷移UCは「UC」
・遷移先状態は「状態」
・状態モデル・状態の説明は「説明」
### 関連データの変換
#child	コンテキスト	状態モデル	オブジェクト1@@オブジェクト2//~
#child	状態モデル	状態	オブジェクト1@@オブジェクト2//~
#arrow	状態	UC	オブジェクト1@@オブジェクト2//~
#arrow	UC	状態	オブジェクト1@@オブジェクト2//~
#arrow	状態	状態	オブジェクト1@@オブジェクト2//~
#comment	状態	説明	オブジェクト1@@オブジェクト2//~
#stereotype	状態	Stereotype	オブジェクト1@@オブジェクト2//~
#comment	状態モデル	説明	オブジェクト1@@オブジェクト2//~

## 「条件」シートから関連データの２行目以降の変換
### カラムの並び
コンテキスト/条件/条件の説明/バリエーション/状態モデル
### 関連データの変換
#child	コンテキスト	条件	オブジェクト1@@オブジェクト2//~
#edge	条件	バリエーション	オブジェクト1@@オブジェクト2//~
#edge	条件	状態モデル	オブジェクト1@@オブジェクト2//~
#comment	条件	説明	オブジェクト1@@オブジェクト2//~

## 「バリエーション」シートから関連データの２行目以降の変換
### カラムの並び
コンテキスト/バリエーション/値/説明
### 関連データの変換
#child	コンテキスト	バリエーション	オブジェクト1@@オブジェクト2//~
#attribute	バリエーション	値	オブジェクト1@@オブジェクト2//~
#comment	バリエーション	説明	オブジェクト1@@オブジェクト2//~


